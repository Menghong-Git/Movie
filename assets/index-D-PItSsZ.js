import{r,j as e,I as g,B as b}from"./index-CR5JE19F.js";import{T,a as D,b as f,c as j,d as k,e as x,U as E,f as A}from"./table-CwVd8_Fv.js";import"./createLucideIcon-Cydmb8Mh.js";const w=r.createContext(void 0),F=({children:t})=>{const[c,a]=r.useState([]),l=s=>{a(n=>[...n,s])},o=(s,n)=>{a(i=>i.map(d=>d.id===s?{...d,...n}:d))},u=s=>{a(n=>n.filter(i=>i.id!==s))};return e.jsx(w.Provider,{value:{doctor:c,addDoctor:l,updateDoctor:o,deleteDoctor:u},children:t})},C=()=>{const t=r.useContext(w);if(!t)throw new Error("useDoctorContext must be used within DoctorProvider");return t},P=({editDoctor:t,onCancelEdit:c})=>{const{addDoctor:a,updateDoctor:l}=C(),[o,u]=r.useState(t?t.name:""),[s,n]=r.useState(t?t.age:""),[i,d]=r.useState(t?t.specialty:""),[p,N]=r.useState(t?t.contact:""),[v,h]=r.useState("");r.useEffect(()=>{t?(u(t.name),n(t.age),d(t.specialty),N(t.contact)):(u(""),n(""),d(""),N(""))},[t,t?.id]);const S=m=>{if(m.preventDefault(),!o.trim()||s===""||isNaN(Number(s))||i.trim()===""||p.trim()===""){h("Name age specialty and contact are required.");return}const y=Number(s);if(!s||isNaN(Number(s))||Number(s)<0){h("Age must be a valid non-negative number.");return}t?(l(t.id,{name:o.trim(),age:y,specialty:i.trim(),contact:p.trim()}),h("Doctor updated!"),setTimeout(()=>h(""),1500),c&&c()):(a({id:crypto.randomUUID(),name:o.trim(),age:y,specialty:i.trim(),contact:p.trim()}),u(""),n(""),d(""),N(""),h("Doctor created!"),setTimeout(()=>h(""),3e3))};return e.jsxs("form",{onSubmit:S,className:"space-y-4 max-w-m",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"doctor-name",children:"Doctor Name"}),e.jsx(g,{id:"doctor-name",value:o,onChange:m=>u(m.target.value),placeholder:"e.g. Pen Menghong "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"doctor-age",children:"Age"}),e.jsx(g,{id:"doctor-age",value:s,onChange:m=>n(m.target.value),type:"number",placeholder:"e.g.30"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"doctor-specialty",children:"Specialty"}),e.jsx(g,{id:"doctor-specialty",value:i,onChange:m=>d(m.target.value),placeholder:"Sergeon"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"doctor-contact",children:"Contact"}),e.jsx(g,{id:"doctor-contact",value:p,onChange:m=>N(m.target.value),placeholder:"e.g. 012-3456789 Texas"})]})]}),e.jsxs("div",{children:[e.jsx(b,{type:"submit",className:"w-full mb-2",disabled:!o.trim()||!i.trim()||s===""||isNaN(Number(s))||!p.trim(),children:t?"Update Doctor":"Create Doctor"}),t&&c&&e.jsx(b,{type:"button",variant:"secondary",className:"w-full",onClick:c,children:"Cancel"})]}),v&&e.jsx("div",{className:"text-green-500 text-sm",children:v})]})},U=({onEdit:t})=>{const{doctor:c,deleteDoctor:a}=C();return e.jsx("div",{className:"mt-6 border rounded p-4 w-full",children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(f,{children:[e.jsx(j,{className:"w-[50px]  text-center",children:"No."}),e.jsx(j,{className:"w-[150px] text-center",children:"Name"}),e.jsx(j,{className:"w-[150px] text-center",children:"Age"}),e.jsx(j,{className:"w-[100px] text-center",children:"Specialty"}),e.jsx(j,{className:"w-[100px] text-center",children:"Contact"}),e.jsx(j,{className:"w-[200px] text-center",children:"Action"})]})}),e.jsx(k,{children:c.length===0?e.jsx(f,{children:e.jsx(x,{colSpan:8,className:"text-center",children:"No doctor found."})}):c.map((l,o)=>e.jsxs(f,{className:"space-x-4",children:[e.jsx(x,{className:"font-medium text-center",children:o+1}),e.jsx(x,{className:"text-center",children:l.name}),e.jsx(x,{className:"text-center",children:l.age}),e.jsx(x,{className:"text-center",children:l.specialty}),e.jsx(x,{className:"text-center",children:l.contact}),e.jsx(x,{className:"text-center",children:e.jsxs("div",{className:"gap-2",children:[e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>t(l),type:"button","aria-label":"Edit",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx(b,{size:"icon",variant:"ghost",onClick:()=>a(l.id),type:"button","aria-label":"Delete",children:e.jsx(A,{className:"w-4 h-4"})})]})})]},l.id))})]})})},z=()=>{const[t,c]=r.useState(null);return e.jsx(F,{children:e.jsx("div",{className:"flex flex-col items-center py-8 w-full",children:e.jsxs("div",{className:"w-full max-w-4xl px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Doctor Management"}),e.jsx("div",{className:"rounded-lg p-6 mb-6 ",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(P,{editDoctor:t,onCancelEdit:()=>c(null)})})}),e.jsxs("div",{className:"rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Doctor List"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-full",children:e.jsx(U,{onEdit:a=>c({id:String(a.id),name:a.name,age:a.age,specialty:a.specialty,contact:a.contact})})})})]})]})})})};export{z as default};
