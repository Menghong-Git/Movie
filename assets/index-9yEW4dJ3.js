import{r as m,j as e,B as N,I as j}from"./index-CR5JE19F.js";import{T as w,a as P,b as g,c as h,d as y,e as u,U as S,f as C}from"./table-CwVd8_Fv.js";import"./createLucideIcon-Cydmb8Mh.js";const p=m.createContext(void 0),T=({children:t})=>{const[s,n]=m.useState([]),l=a=>{n(r=>[...r,a])},c=(a,r)=>{n(d=>d.map(i=>String(i.id)===String(a)?{...i,...r}:i))},o=a=>{n(r=>r.filter(d=>String(d.id)!==String(a)))};return e.jsx(p.Provider,{value:{patient:s,addPatient:l,updatePatient:c,deletePatient:o},children:t})},b=()=>{const t=m.useContext(p);if(!t)throw new Error("useHospitalContext must be used within PatientProvider");return t},E=({onEdit:t})=>{const{patient:s,deletePatient:n}=b();return e.jsxs(w,{children:[e.jsx(P,{children:e.jsxs(g,{children:[e.jsx(h,{className:"w-[50px]  text-center",children:"No."}),e.jsx(h,{className:"w-[150px] text-center",children:"Name"}),e.jsx(h,{className:"w-[100px] text-center",children:"Age"}),e.jsx(h,{className:"w-[200px] text-center",children:"Action"})]})}),e.jsx(y,{children:s.length===0?e.jsx(g,{children:e.jsx(u,{colSpan:4,className:"text-center",children:"No patients found."})}):s.map((l,c)=>e.jsxs(g,{className:"space-x-4",children:[e.jsx(u,{className:"font-medium text-center",children:c+1}),e.jsx(u,{className:"text-center",children:l.name}),e.jsx(u,{className:"text-center",children:l.age}),e.jsx(u,{className:"text-center",children:e.jsxs("div",{className:"gap-2",children:[e.jsx(N,{size:"icon",variant:"ghost",onClick:()=>t(l),type:"button","aria-label":"Edit",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx(N,{size:"icon",variant:"ghost",onClick:()=>n(l.id),type:"button","aria-label":"Delete",children:e.jsx(C,{className:"w-4 h-4"})})]})})]},l.id))})]})},k=({editPatient:t,onCancelEdit:s})=>{const{addPatient:n,updatePatient:l}=b(),[c,o]=m.useState(t?t.name:""),[a,r]=m.useState(t?t.age:""),[d,i]=m.useState("");m.useEffect(()=>{t?(o(t.name),r(t.age)):(o(""),r(""))},[t,t?.id]);const f=x=>{if(x.preventDefault(),!c.trim()||a===""||isNaN(Number(a))){i("Name and age are required.");return}const v=Number(a);if(!a||isNaN(Number(a))||Number(a)<0){i("Age must be a valid non-negative number.");return}t?(l(t.id,{name:c.trim(),age:v}),i("Patient updated!"),setTimeout(()=>i(""),1500),s&&s()):(n({id:crypto.randomUUID(),name:c.trim(),age:Number(a)}),o(""),r(""),i("Patient created!"),setTimeout(()=>i(""),3e3))};return e.jsxs("form",{onSubmit:f,className:"space-y-4 max-w-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"patient-name",children:"Patient Name"}),e.jsx(j,{id:"patient-name",value:c,onChange:x=>o(x.target.value),placeholder:"e.g. Pen Menghong "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"patient-age",children:"Age"}),e.jsx(j,{id:"patient-price",value:a,onChange:x=>r(x.target.value),placeholder:"e.g. 18",type:"number",min:"0"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",className:"w-full",disabled:!c.trim()||a===""||isNaN(Number(a)),children:t?"Update Product":"Create patient"}),t&&s&&e.jsx(N,{type:"button",variant:"secondary",className:"w-full",onClick:s,children:"Cancel"})]}),d&&e.jsx("div",{className:"text-green-500   text-sm",children:d})]})};function D(){const[t,s]=m.useState(null);return e.jsx(T,{children:e.jsxs("div",{className:"container mx-auto py-8 w-full",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 justify-center text-center",children:"Patient Register"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{onEdit:n=>s({id:String(n.id),name:n.name,age:n.age})}),e.jsx(k,{editPatient:t,onCancelEdit:()=>s(null)})]})]})})}export{D as Patient,D as default};
